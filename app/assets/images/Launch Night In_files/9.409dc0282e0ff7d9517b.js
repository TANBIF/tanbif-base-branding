(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"1bmw":function(t,e,n){"use strict";n.r(e),n.d(e,"AudioController",(function(){return l}));var r=n("o0o1"),o=n.n(r),i=n("HaE+"),a=n("1OyB"),u=n("vuIU"),s=(n("JgGj"),n("I6D8"),n("rePB")),c=new(function(){function t(){var e=this;Object(a.a)(this,t),Object(s.a)(this,"scales",{diatonic:[0,-1,0,-1,0,0,-1,0,-1,0,-1,0],dorian:[0,1,0,0,-1,0,1,0,1,0,0,-1],phrygian:[0,0,-1,0,-1,0,1,0,0,-1,0,-1],lydian:[0,1,0,1,0,1,0,0,1,0,1,0],mixolydian:[0,1,0,1,0,0,-1,0,-1,0,0,-1],aeolian:[0,-1,0,0,-1,0,-1,0,0,-1,0,-1],locrian:[0,0,-1,0,-1,0,0,-1,0,-1,0,-1],harmonicMinor:[0,1,0,0,-1,0,1,0,0,-1,1,0],melodicMinor:[0,1,0,0,-1,0,1,0,-1,0,1,0],majorPentatonic:[0,1,0,1,0,-1,1,0,1,0,-1,1],minorPentatonic:[0,-1,1,0,-1,0,1,0,-1,1,0,-1],doubleHarmonic:[0,0,-1,1,0,0,1,0,0,-1,1,0],halfDim:[0,1,0,0,-1,0,0,-1,0,-1,0,-1],chromatic:[0,0,0,0,0,0,0,0,0,0,0,0],custom:[0,-1,0,-1,0,-1,-1,0,-1,0,-1,0],custom2:[-1,0,0,-1,0,0,1,0,0,-1,0,0]}),Object(s.a)(this,"patterns",[[71,72,69,71,67,69,64,67,62,64,62,60,59,60,62,64,65,67,69,71,67,64,62,60,59,60,57,59,55],[83,88,86,81,79,83,81,76,74,79,76,72,71,72,69,67],[74,72,70,69,70,67,69,65,67,62,65,63,67,70,74,77,74,77,74,72,70,69,70,67,69,65],[69,74,72,67,64,69,67,62,60,64,62,57,55,60,57,53,55,57,60,62,64,65,67,62,65,64,62,64,62,60,59],[59,60,64,67,71,72,76,79,83,84,88,91,95,98,95,98,95,91,88,91,88,84,83,86,83,79,76,79,76,72,71,74,71,67,64,67,64,60,59,55],[91,86,88,84,83,86,83,79,76,79,76,72,71,74,71,67,64,67,64,60,59,60,64,67,71,72,74,76,79,74,76,71,72,67],[67,65,64,65,69,72,76,79,77,76,74,76,72,71,74,71,72,67,64,67,62,60],[65,67,65,64,65,67,69,71,72,74,76,77,79,81,83,84,86,88,89,91,93,91,88,86,88,86,84,83,84,79,81,76,79,74,76,72,71,71,72,67],[55,59,60,62,67,71,72,76,79,83,86,88,93,91,88,84,81,79,77,76,74,72,71]]),Object(s.a)(this,"pattern",-1),Object(s.a)(this,"root",0),Object(s.a)(this,"transpose",-5),Object(s.a)(this,"currentStep",0),Object(s.a)(this,"scale","custom"),Object(s.a)(this,"getNote",(function(){e.scale.length||(e.scale=e.scalesToUse[Math.floor(Math.random()*e.scalesToUse.length)]),e.pattern<0&&e.changePattern();var t=e.patterns[e.pattern][e.currentStep],n=t+e.scales[e.scale][t%12],r=e.transpose+n;return e.currentStep++,e.currentStep=e.currentStep%e.patterns[e.pattern].length,r})),Object(s.a)(this,"changePattern",(function(){e.pattern=Math.floor(Math.random()*e.patterns.length),e.currentStep=0}))}return Object(u.a)(t,[{key:"getClosestTarget",value:function(t,e){return t.reduce((function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t}))}},{key:"scaleifyNote",value:function(t,e){var n=(t%12+5)%12;if(void 0==e.filter((function(t){return t===n}))[0]){var r=this.getClosestTarget(e,t),o=t-=n-r;t=o+=this.scales[this.scale][(o%12+5)%12]}return t}},{key:"playScale",set:function(t){this.scale=t}}]),t}()),l=function(){function t(){Object(a.a)(this,t),this.lastNoteTime=0,this.lastNoteNumber=0,this.noteCount=0,this.maxnNotesPerPattern=30,this.scaleProgression=[{start:0,end:3.428,scale:"custom",targetNotes:[2,4,7],root:7},{start:3.428,end:6.857,scale:"diatonic",targetNotes:[2,4,7],root:2},{start:6.857,end:10.285,scale:"custom",targetNotes:[2,4,7],root:7},{start:10.285,end:12,scale:"diatonic",targetNotes:[4,5,9],root:9},{start:12,end:13.714,scale:"custom2",targetNotes:[2,4,11],root:2},{start:13.714,end:17.142,scale:"custom",targetNotes:[4,7,11],root:11},{start:17.142,end:20.571,scale:"custom",targetNotes:[0,2,4],root:4},{start:20.571,end:24,scale:"diatonic",targetNotes:[4,5,9],root:9},{start:24,end:27.428,scale:"custom2",targetNotes:[2,4,11],root:2}]}return Object(u.a)(t,[{key:"load",value:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Klang.init({audioPath:"../../sounds/"});case 2:return t.abrupt("return",Klang.preload(["auto","ui"],(function(){})));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"toggleMute",value:function(t){Klang.muted=t}},{key:"onStartClick",value:function(){Klang.trigger("teaser_loop_start"),this.soundStarted=!0}},{key:"onStopLoop",value:function(){this.loopStopped=!0,Klang.trigger("teaser_loop_stop")}},{key:"onTVCountDown",value:function(){Klang.trigger("tv_count_down")}},{key:"onTVCountDownComplete",value:function(){Klang.trigger("tv_count_down_complete")}},{key:"onPlayButtonAnimateIn",value:function(){Klang.trigger("play_button_animate_in")}},{key:"onPlayClick",value:function(){Klang.trigger("button_click")}},{key:"onTransitionToTV",value:function(){Klang.trigger("transition_to_tv")}},{key:"onAmatiMenuItemRollover",value:function(){Klang.trigger("amati_focus")}},{key:"onAmatiMenuItemClick",value:function(){Klang.trigger("amati_focus")}},{key:"onAmatiButtonRollover",value:function(){Klang.trigger("amati_focus")}},{key:"onAmatiButtonClick",value:function(){Klang.trigger("amati_focus")}},{key:"onAmatiCardFocus",value:function(){Klang.trigger("amati_focus")}},{key:"onAmatiCardSelect",value:function(){Klang.trigger("amati_applaunch")}},{key:"onAmatiSelect",value:function(){Klang.trigger("amati_select")}},{key:"onAmatiDeselect",value:function(){Klang.trigger("amati_deselect")}},{key:"onAmatiTransitionIn",value:function(){Klang.trigger("amati_transition_in")}},{key:"onAmatiTransitionOut",value:function(){Klang.trigger("amati_transition_out")}},{key:"onAmatiPlayPauseRollover",value:function(){Klang.trigger("amati_focus")}},{key:"onAmatiPlayPauseClick",value:function(){Klang.trigger("amati_focus")}},{key:"onButtonRollover",value:function(){Klang.trigger("button_rollover")}},{key:"setScale",value:function(){var t=this;return new Promise((function(e){Klang.trigger("get_loop_progress",(function(n){var r=n||0,o=t.scaleProgression.filter((function(t){return t.start<=r&&t.end>r}))[0];e(o)}))}))}},{key:"logNote",value:function(t,e){}},{key:"onKeyTrigger",value:function(){var t=Object(i.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setScale();case 2:for(e=t.sent,c.playScale=e.scale,(performance.now()-this.lastNoteTime>900||this.noteCount>this.maxnNotesPerPattern)&&(c.changePattern(),this.noteCount=0),n=c.getNote();n===this.lastNoteNumber;)n=c.getNote();e.root!==this.lastRoot&&(n=c.scaleifyNote(n,e.targetNotes)),this.logNote(n,e.root),Klang.trigger("piano",n),this.noteCount++,this.lastNoteTime=performance.now(),this.lastNoteNumber=n,this.lastRoot=e.root;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()},I6D8:function(t,e){var n,r;n=window,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(11),o=n(7);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){t.exports=n(9)},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(12),o=n(13),i=n(14),a=n(16);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new A(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=c(t,e,n);if("normal"===s.type){if(r=n.done?p:f,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",_={};function h(){}function y(){}function m(){}var g={};g[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(O([])));b&&b!==n&&r.call(b,i)&&(g=b);var w=m.prototype=h.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,u){var s=c(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function P(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:E}}function E(){return{value:e,done:!0}}return y.prototype=w.constructor=m,m.constructor=y,m[u]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(w),w[u]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e,n){var r=n(15);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e);var r=n(5),o=n.n(r),i=n(6),a=n.n(i),u=n(2),s=n.n(u),c=n(0),l=n.n(c),f=n(7),d=n.n(f),p=n(3),_=n.n(p),h=n(4),y=n.n(h),m=n(1),g=n.n(m);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b,w=function(){function t(){s()(this,t),this.masterContext=k.getContext()}return l()(t,[{key:"now",value:function(){return this.masterContext.currentTime}},{key:"random",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return~~(e+(1+t-e)*Math.random())}},{key:"randomFloat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e+(t-e)*Math.random()}},{key:"semitonesToPlaybackRate",value:function(t){var e=Math.pow(2,1/12);return Math.pow(e,t)}},{key:"curveParamLin",value:function(t,e,n,r){var o=this.masterContext.currentTime;r=r||o,t.cancelScheduledValues(0),r+n<=o?t.value=e:(t.setValueAtTime(t.value,r),t.linearRampToValueAtTime(e,r+n))}},{key:"curveParamExp",value:function(t,e,n,r){var o=this.masterContext.currentTime;r=r||o,t.cancelScheduledValues(0),r+n<=o?t.value=e:(t.setValueAtTime(t.value,r),t.exponentialRampToValueAtTime(e,r+n))}},{key:"transition",value:function(t,e,n,r,o,i,a,u){var s=this.masterContext.currentTime;if(i||a||u)throw new TypeError("unsupported use of transition");if(n=n||120,o=o||2,!e)throw new Error("no transition to");Array.isArray(t)||(t=t?[t]:[]);var c,l=null,f=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(t);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(d.playing){l=d;break}}}catch(t){f.e(t)}finally{f.f()}if(l===e&&!l.stopping)return l.dispatchEvent(new Event("trigger")),s;if(!l)return e.play(s,0),s;var p=60/n,_=n/60,h=(r=r||4)-((l?l.position:0)||0)*_%r;h<.5&&(h+=r);var y=s+(l.playing?h*p:0);return e.play(y),t.filter((function(t){return!t.stopping&&t!==e})).forEach((function(t){return t.fadeOutAndStop(o,y)})),y}},{key:"loadScriptFile",value:function(){var t=a()(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=document.createElement("script");r.async=!0,r.onload=function(){r.onload=null,t()},r.onerror=function(t){r.onerror=null,n(t)},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),k=function(){function t(){s()(this,t),this.masterContext=t.getContext(),this.Util=new w}return l()(t,null,[{key:"getContext",value:function(){return b||(b=function(){try{b=new(window.AudioContext||window.webkitAudioContext)}catch(t){return void console.warn("web audio not supported by browser")}return b}()),b}}]),t}(),S=(new Audio).canPlayType("audio/ogg")?".ogg":".mp3",P=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s()(this,n),(r=e.call(this))._audioPath=t,r._callback=o,r._pending={},r._buffers={},r}return l()(n,[{key:"_internalLoad",value:function(){var t=a()(o.a.mark((function t(e){var n,r,i,a=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(this._audioPath).concat(e).concat(S),t.next=3,window.fetch(n);case 3:if((r=t.sent).ok){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,r.arrayBuffer();case 8:return i=t.sent,t.abrupt("return",new Promise((function(t,e){a.masterContext.decodeAudioData(i,t,e)})));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(t){return this._buffers[t]||null}},{key:"optionalPreload",value:function(t,e){return t in this._buffers?null:this.preload(t,e)}},{key:"preload",value:function(t,e){var n=this,r=this._pending[t];if(void 0!==r)return r;var o=this._internalLoad(e);return this._pending[t]=o,o.then((function(e){n._buffers[t]=e,n._callback&&n._callback(t,e)}),(function(){return delete n._pending[t],null})),o}}]),n}(k),x=n(8),R=n.n(x),A=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(t,r,o){var i;if(s()(this,n),(i=e.call(this))._nodes=r,i._globalVars=o,i._timeout=0,i._loop=Boolean(t.loop),"AdvancedProcess"===t.type){if("me.process.stop();"!==t.pre_action.script)throw new TypeError("expected pre_action to be standard, was: "+t.pre_action.script);var a=R()(t.actions,2),u=a[0],c=a[1];if("wait"!==u.operation||"exec"!==c.operation)throw new TypeError("invalid op order for AdvancedProcess");i.delay=new Function("this.Util",u.script),i._fn=new Function("Core","Model","this.Util","me","args","vars",c.script)}else if(i._fn=t.action,i._loop)throw new Error("cannot loop SimpleProcess, no delay");return i.delay=i.delay.bind(null,i.Util),i}return l()(n,[{key:"delay",value:function(){return 0}},{key:"stop",value:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=0)}},{key:"start",value:function(t){var e=this;this._timeout&&window.clearTimeout(this._timeout);var n=this.delay(),r=function(){e._fn(null,null,e.Util,e._nodes,t,e._globalVars),e._timeout&&(e._timeout=0,e._loop&&e.start(t))};n>0?this._timeout=window.setTimeout(r,1e3*n):r()}},{key:"_started",get:function(){return this.started}},{key:"started",get:function(){return Boolean(this._timeout)}}]),n}(k),O=function(){function t(e){s()(this,t),this._bpm=e.bpm,this._started=!1}return l()(t,[{key:"start",value:function(){this._started=!0}},{key:"stop",value:function(){this._started=!1}},{key:"started",get:function(){return this._started}}]),t}(),E=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(t){var r;return s()(this,n),(r=e.call(this))._wet=r.masterContext.createGain(),r._wet.gain.setValueAtTime(t.wet,r.masterContext.currentTime),r}return l()(n,[{key:"node",get:function(){return this._wet}}]),n}(k),N=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(t,r){var o;s()(this,n),(o=e.call(this))._input=o.masterContext.createGain(),o._output=o.masterContext.createGain(),o._originalInputVolume=void 0!==t.input_vol?t.input_vol:1,o._originalOutputVolume=void 0!==t.output_vol?t.output_vol:1,o._input.gain.value=o._originalInputVolume,o._output.gain.value=o._originalOutputVolume,o._effects=(t.effects||[]).map((function(t){switch(t.type){case"BiquadFilter":return new EffectBiquadFilter(t);case"StereoPanner":return new EffectSteroPanner(t);case"EffectSend":return new E(t)}throw new TypeError("unsupported effect: ".concat(t.type))}));var i=o._input;if(o._effects.forEach((function(t){i.connect(t.node),i=t.node})),i.connect(o._output),null===r);else{if(!(r instanceof n))throw new Error("unknown AudioBus destination");o._output.connect(r.input)}return o}return l()(n,[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Util.curveParamLin(this._input.gain,this._originalInputVolume,t),this.Util.curveParamLin(this._output.gain,this._originalOutputVolume,t),this.effects.forEach((function(e){return e.reset(t)}))}},{key:"effects",get:function(){return this._effects}},{key:"input",get:function(){return this._input}},{key:"output",get:function(){return this._output}}]),n}(k),T=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(t,r,o){var i;if(s()(this,n),(i=e.call(this))._buffer=r,i._startTime=0,i._performanceStart=0,i._output=i.masterContext.createGain(),i._output.connect(o.input),i._fadeOutTimeout=0,i._fadeOutTime=0,i._sources=[],t.pitch_start_range&&t.pitch_end_range){var a=t.pitch_start_range,u=t.pitch_end_range,c=new WeakMap;i._shiftSource=function(t){var e=c.get(t);if(void 0!==e)return e;var n=a+Math.random()*(u-a);return c.set(t,n),n}}if(t.volume_start_range&&t.volume_end_range){var l=t.volume_start_range,f=t.volume_end_range;i._volumeNode=function(t){var e=i.masterContext.createGain();return e.gain.value=l+Math.random()*(f-l),t.connect(e),e}}return i._originalPlaybackRate=t.playback_rate||1,i._playbackRate=i._originalPlaybackRate,i._config=t,i._volume=t.volume||1,i._loop=Boolean(t.loop),i._loopStart=i._config.loop_start||void 0,i._loopEnd=i._config.loop_end||void 0,i._retrig=void 0===t.retrig||Boolean(t.retrig),i._loop&&(i._retrig=!1),i}return l()(n,[{key:"_volumeNode",value:function(t){return t}},{key:"_shiftSource",value:function(){return 1}},{key:"_createSource",value:function(){var t=this.masterContext.createBufferSource();return t.buffer=this._buffer,t.playbackRate.value=this._playbackRate*this._shiftSource(t),this._loop&&(t.loop=!0,void 0!==this._loopStart&&(t.loopStart=this._loopStart,void 0===this._loopEnd&&t.buffer&&(t.loopEnd=t.buffer.duration)),void 0!==this._loopEnd&&(t.loopEnd=this._loopEnd)),this._volumeNode(t).connect(this._output),this._sources.unshift(t),t.addEventListener("ended",this._cleanup.bind(this,t),{once:!0}),t}},{key:"_cleanup",value:function(t){var e=this._sources.lastIndexOf(t);-1!==e&&(this._sources.splice(e,1),this._sources.length)}},{key:"_resetFade",value:function(){var t=this._output.gain;t.cancelScheduledValues(0),t.setValueAtTime(this._volume,0),window.clearTimeout(this._fadeOutTimeout),this._fadeOutTimeout=0,this._fadeOutTime=0}},{key:"_internalPlay",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._sources[0]||null,r=Boolean(n);return!(r&&(!this._retrig||this._loop))&&!(!this._loop&&!this._buffer)&&(this._createSource().start(t,e),this._startTime=Math.max(this._startTime,t),this._startOffset=e,this._loop&&"suspended"===this.masterContext.state&&(this._performanceStart=performance.now()/1e3),!0)}},{key:"_internalSetPlaybackRate",value:function(t){return t!==this._playbackRate&&(this._originalPlaybackRate,this._playbackRate=t,!0)}},{key:"resume",value:function(t){if(this._loop&&this._sources.length&&this._performanceStart){var e=t-this._performanceStart;this._performanceStart=0,this._startTime=this.masterContext.currentTime-e;var n=this.position;this._sources.forEach((function(t){(void 0==t.playbackState||t.playbackState>0)&&t.stop()})),this._createSource().start(this.masterContext.currentTime,n)}}},{key:"curvePlaybackRate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.masterContext.currentTime;if(this._internalSetPlaybackRate(t)&&this._loop&&this._sources[0]){var r=this._sources[0];this.Util.curveParamExp(r.playbackRate,t*this._shiftSource(r),e,n)}}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._resetFade(),this._internalPlay(t||this.masterContext.currentTime,e)}},{key:"stop",value:function(){this._resetFade(),this._loop&&(this._startTime=0,this._performanceStart=0),this._sources.forEach((function(t){return t.stop()}))}},{key:"fadeInAndPlay",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e=e||this.masterContext.currentTime,this._sources.length&&!this._fadeOutTimeout)return this._internalPlay(e,n);var r=this._output.gain;return 0!==this._fadeOutTimeout?(window.clearTimeout(this._fadeOutTimeout),this._fadeOutTimeout=0,this._fadeOutTime=0):r.value=0,this.Util.curveParamLin(r,this._volume,t,e),this._internalPlay(e,n)}},{key:"fadeOutAndStop",value:function(t,e){var n=this,r=this.masterContext.currentTime;if((e=e||r)<=r&&t<=0)return this.stop();if(this._fadeOutTime&&this._fadeOutTime<e)return!0;this.Util.curveParamLin(this._output.gain,0,t,e);var o=1e3*(e+t-r);this._fadeOutTimeout=window.setTimeout((function(){return n.stop()}),o),this._fadeOutTime=e}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0!==this._fadeOutTimeout||this._resetFade(),this.curvePlaybackRate(this._originalPlaybackRate,t)}},{key:"position",get:function(){var t=this._sources[0]||null;if(null===t||!this._buffer)return 0;var e=this.masterContext.currentTime,n=this._buffer.duration;return t.loop&&(t.loopStart||t.loopEnd)&&(n=(t.loopEnd||n)-(t.loopStart||0)),this._startOffset+(e-this._startTime)%n}},{key:"loop",get:function(){return this._loop}},{key:"buffer",set:function(t){t!==this._buffer&&(this._startTime=this.masterContext.currentTime,this._buffer=t,this._sources.forEach((function(e){e.buffer=t})))},get:function(){return this._buffer}},{key:"duration",get:function(){return this._buffer?this._buffer.duration:0}},{key:"output",get:function(){return this._output}},{key:"playing",get:function(){return Boolean(this._sources.length)}},{key:"playbackRate",set:function(t){if(this._internalSetPlaybackRate(t)&&this._loop&&this._sources[0]){var e=this._sources[0],n=e.playbackRate;n.cancelScheduledValues(0),n.value=t*this._shiftSource(e)}},get:function(){return this._playbackRate}},{key:"playbackRateNode",get:function(){return this._sources[0]?this._sources[0].playbackRate:null}},{key:"stopping",get:function(){return Boolean(this._fadeOutTimeout)}}]),n}(k),j=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(t,r){var o;if(s()(this,n),(o=e.call(this))._type="group_type"in t?t.group_type:2,o._active=null,t.retrig)throw new TypeError("unsupported retrig AudioGroup");return o._content=t.content.map((function(t){return r[t]})),o}return l()(n,null,[{key:"types",get:function(){return{CONCURRENT:0,STEP:1,RANDOM:2,SHUFFLE:3}}}]),l()(n,[{key:"_onContentStarted",value:function(t){this._activeContent.size,this._activeContent.add(t.target)}},{key:"_onContentEnded",value:function(t){this._activeContent.delete(t.target)&&this._activeContent.size}},{key:"curvePlaybackRate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.masterContext.currentTime;this._content.forEach((function(r){return r.curvePlaybackRate(t,e,n)}))}},{key:"_each",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=this._content;if(!this._type)return o.forEach(t),!0;if(e){do{if(r>=0&&r<o.length)break;if(this._type==n.types.RANDOM){r=~~(Math.random()*o.length);break}if((r=(o.indexOf(this._active)+1)%o.length)||this._type!==n.types.SHUFFLE)break;o.sort((function(){return Math.random()-.5})),this._active&&o[0]===this._active&&o.push(o.shift())}while(0);this._active=o[r]||null}return!!this._active&&(t(this._active),!0)}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if("number"!=typeof e)throw new TypeError("can only force play a specific index");this._each((function(e){return e.play(t)}),!0,e)||this.active.forEach((function(t){return t.dispatchEvent(new Event("trigger"))}))}},{key:"stop",value:function(){this._each((function(t){return t.stop()}))}},{key:"fadeInAndPlay",value:function(t,e){this._each((function(n){return n.fadeInAndPlay(t,e)}),!0)||this.active.forEach((function(t){return t.dispatchEvent(new Event("trigger"))}))}},{key:"fadeOutAndStop",value:function(t,e){this._each((function(n){return n.fadeOutAndStop(t,e)}),!1)}},{key:"content",get:function(){return this._content}},{key:"active",get:function(){return this._active&&this._active.playing?[this._active]:!this._type&&this._content[0]&&this._content[0].playing?this._content.slice():[]}},{key:"latestPlayed",get:function(){return this._active&&this._active.playing?this._active:null}},{key:"playing",get:function(){var t=this._active||this._content[0]||null;return!!t&&t.playing}},{key:"stopping",get:function(){var t=this._active||this._content[0]||null;return!!t&&t.stopping}},{key:"playbackRate",set:function(t){this._content.forEach((function(e){return e.playbackRate=t}))},get:function(){var t=this._content.map((function(t){return t.playbackRate}));return t.reduce((function(t,e){return t+e}),0)/(t.length||1)}}]),n}(k),C=function(t){_()(n,t);var e=function(t){return function(){var e,n=g()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y()(this,e)}}(n);function n(){var t;return s()(this,n),t=e.call(this),window.Klang=d()(t),t.superMasterMuted=!1,t}return l()(n,[{key:"initRemote",value:function(){var t=a()(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.settings=e,t.next=3,this.Util.loadScriptFile(this.settings.configPath);case 3:this.setup();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"init",value:function(t){this.settings=t,this.setup()}},{key:"setup",value:function(){var t=this;this._config=KLANG_CONFIG;var e=this.settings.audioPath||this._config.settings.file_path,n={};this._config.files.forEach((function(t){return n[t.id]=t})),this._preload={};var r=this._config.audio;for(var o in r){var i=r[o];if("AudioSource"===i.type){var a=n[i.file_id],u=a.load_group,s=this._preload[u];void 0===s&&(s=this._preload[u]=new Map),s.set(o,a.url)}}Object.assign(r,this._config.busses,this._config.sequencers,this._config.processes),this._masterOutMuted=!1,this._masterOut=new N({},null),this._masterOut.output.gain.value=1,this.superMaster=new N({},null),this.superMaster.output.gain.value=1,this._masterOut.output.connect(this.superMaster.input),this.superMaster.output.connect(this.masterContext.destination),this._nodes={$OUT:this._masterOut},this._loader=new P(e,(function(e,n){var r=t._nodes[e];r&&(r.buffer=n)})),this._busNodes=new Set,this._activeNodes=new Set,this._dirtyNodes=new Set,this._transientAudioElements=new Set,this._triggerNodes=null,"suspended"===this.masterContext.state&&(this.masterContext.onstatechange=function(){if("running"===t.masterContext.state){t.masterContext.onstatechange=null;var e=performance.now()/1e3;t._activeNodes.forEach((function(t){t instanceof T&&t.resume(e)}))}}),window.addEventListener("blur",(function(){t.blurMuted=!0})),window.addEventListener("focus",(function(){t.blurMuted=!1}))}},{key:"prepareKNode",value:function(t,e){var n,r=this._nodes[e.destination_name]||null;if("destination_name"in e&&!r)throw new Error("got unprepared destination node ".concat(e.destination_name," for ").concat(t));switch(e.type){case"AudioSource":n=new T(e,this._loader.get(t),r);break;case"AudioGroup":n=new j(e,this._nodes);break;case"AdvancedProcess":case"SimpleProcess":n=new A(e,this._nodes,this._config.vars);break;case"Bus":n=new N(e,r);break;case"Sequencer":n=new O(e);break;default:throw new Error("unsupported: "+e.type)}return n}},{key:"internalPrepareKey",value:function(t){var e=this;if(t in this._nodes)return this._nodes[t];this._nodes[t]=null;var n=this._config.audio[t];[].concat(n.vars||[],n.content||[],n.destination_name||[]).filter((function(t){return!(t in e._nodes)})).forEach(this.internalPrepareKey.bind(this));var r=this.prepareKNode(t,n,this._nodes);return r instanceof N&&this._busNodes.add(r),this._nodes[t]=r,r}},{key:"transitionTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;"string"==typeof t&&(t=[t]),this._triggerNodes=new Set,t.forEach((function(t){return e.play(t)})),this._activeNodes.forEach((function(t){t.stopping||e._triggerNodes.has(t)||(t instanceof A?t.stop():t.fadeOutAndStop(n))})),this._triggerNodes=null,this._transientAudioElements.forEach((function(t){return t.pause()})),this._transientAudioElements.clear()}},{key:"stopAll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this._triggerNodes=new Set,this._activeNodes.forEach((function(n){n.stopping||t._triggerNodes.has(n)||(n instanceof A?n.stop():n.fadeOutAndStop(e))})),this._transientAudioElements.forEach((function(t){return t.pause()})),this._transientAudioElements.clear()}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this._dirtyNodes.forEach((function(e){return e.reset(t)})),this._busNodes.forEach((function(e){return e.reset(t)})),this._dirtyNodes.clear()}},{key:"active",value:function(){return Array.from(this._activeNodes)}},{key:"resume",value:function(){return this.masterContext.resume()}},{key:"preload",value:function(t,e){var n=this;"string"==typeof t&&(t=[t]);var r=new Set,o=[],i=0,a=0,u=e?function(){return e(++i,a)}:null,s=function(t){t in n._preload&&n._preload[t].forEach((function(t,e){var o=n._loader.optionalPreload(e,t);o&&(++a,r.add(o),o.then(u))}))};t.forEach((function(t){var e=n._config.events[t],r=n._config.audio[e];r&&"SimpleProcess"===r.type&&o.push(r.action),s(t)}));try{o.forEach((function(t){try{t(null,null,null,null,[],null)}catch(t){}}))}finally{}return e&&e(0,a),Promise.all(Array.from(r)).then((function(){return null}))}},{key:"trigger",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if("@"===t){if(1!==r.length)throw new Error("expected URL arg for @ command");var i=new Audio(r[0]);return i.play(),this._transientAudioElements.add(i),i.addEventListener("ended",(function(){return e._transientAudioElements.delete(i)})),!0}if(this._config.events[t]){var a=this._config.events[t]||this._config.exportedSymbols[t],u=a?this.internalPrepareKey(a):null;if(u instanceof T||u instanceof j)return u.play();if(u instanceof A)try{return u.start(r)}finally{}if("string"==typeof t)return console.debug("audio missing",t),!1;throw console.warn("got invalid arg for lilklang lookup",t),new Error("invalid type for lilklang")}console.warn("no event named",t)}},{key:"suspended",get:function(){return"suspended"===this.masterContext.state}},{key:"muted",get:function(){return this._masterOutMuted},set:function(t){t!==this._masterOutMuted&&(this._masterOutMuted=t,this.Util.curveParamLin(this._masterOut.output.gain,this._masterOutMuted?0:1,.5))}},{key:"blurMuted",get:function(){return this.superMasterMuted},set:function(t){t!==this.superMasterMuted&&(this.superMasterMuted=t,this.Util.curveParamLin(this.superMaster.output.gain,this.superMasterMuted?0:1,.5))}}]),n}(k);e.default=new C}])},"object"==typeof e&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof e?e.lib=r():n.lib=r()},JgGj:function(t,e){window.KLANG_CONFIG={settings:{sequencer_lookahead:50,sequencer_schedule_ahead:.4,sequencer_schedule_ahead_ios:.3,sequencer_resolution:.25,timehandler_lookahead:50,blur_fade_time:.2,listener:{position:[0,0,0],orientation:[0,0,-1],orientation_up:[0,1,0],velocity:[0,0,0],doppler_factor:1,speed_of_sound:343.3,scale:1},file_path:"sounds/",relative_path:"1"},files:[{id:"15524",url:"15524_977c2821fbcf14f51358e08bc046c0c3_rollover",file_type:"audio",load_group:"ui"},{id:"15504",url:"15504_5393ee93b85c850534c3a2bf99454a44_200917_amati_home",file_type:"audio",load_group:"ui"},{id:"15520",url:"15520_9f6ea519fa18de197fdddf08a83b6307_200917_amati_uideselect",file_type:"audio",load_group:"ui"},{id:"15521",url:"15521_acca9111763459399fa45d1e2ddbe539_200917_amati_uiselect",file_type:"audio",load_group:"ui"},{id:"15516",url:"15516_4aa772fc1bc07d3e7f4f7828e62269b3_200917_amati_componentfocus",file_type:"audio",load_group:"ui"},{id:"15518",url:"15518_7218b27d855f4bdadda9eea93374d0c7_200917_amati_transitionbackwardz",file_type:"audio",load_group:"ui"},{id:"15519",url:"15519_b373a2f9ca2e5d74e114394fe6877c5a_200917_amati_transitionforwardz",file_type:"audio",load_group:"ui"},{id:"15440",url:"15440_a9f36d2753fd812d2be727f2b69445f2_piano_sampler_96",file_type:"audio",load_group:"auto"},{id:"15441",url:"15441_1a45611474d755094d3841d9ffef46c1_piano_sampler_93",file_type:"audio",load_group:"auto"},{id:"15442",url:"15442_5b743aaf50a35729b09a217a6b6807cd_piano_sampler_90",file_type:"audio",load_group:"auto"},{id:"15443",url:"15443_73b0c4eb9f154dc8404a48cb495ade7b_piano_sampler_87",file_type:"audio",load_group:"auto"},{id:"15444",url:"15444_e33cd8836bf877fc69a97b23a22662d1_piano_sampler_84",file_type:"audio",load_group:"auto"},{id:"15458",url:"15458_117b506578c86e821389674482572cef_piano_sampler_81",file_type:"audio",load_group:"auto"},{id:"15446",url:"15446_d86155fee288cac69b9d6f10cefd79dc_piano_sampler_77",file_type:"audio",load_group:"auto"},{id:"15447",url:"15447_c6947c09cab559792f61c80df6d24ea1_piano_sampler_74",file_type:"audio",load_group:"auto"},{id:"15448",url:"15448_22c5d06f2860e3a37d4130b61d1367cb_piano_sampler_71",file_type:"audio",load_group:"auto"},{id:"15449",url:"15449_9d4e9a8d3c56812f838ce676c2d2429f_piano_sampler_69",file_type:"audio",load_group:"auto"},{id:"15450",url:"15450_d28740d20d8b8f36b0cd05ad789f92ba_piano_sampler_66",file_type:"audio",load_group:"auto"},{id:"15451",url:"15451_9920f947e7a0f61b9d48e9360a733411_piano_sampler_63",file_type:"audio",load_group:"auto"},{id:"15457",url:"15457_4ae62d5265ee9fcac6976dba3c647e16_piano_sampler_60",file_type:"audio",load_group:"auto"},{id:"15453",url:"15453_5476c8016ae8fd0c5f3004aa3e2797f4_piano_sampler_57",file_type:"audio",load_group:"auto"},{id:"15454",url:"15454_500b392917fdbd5d3ec07eb2884f62a1_piano_sampler_54",file_type:"audio",load_group:"auto"},{id:"15455",url:"15455_b47d23a7fe95e03f63f59beaebd5f8a7_piano_sampler_51",file_type:"audio",load_group:"auto"},{id:"15456",url:"15456_bce1749ab8fed6d5aa25b196056183b6_piano_sampler_48",file_type:"audio",load_group:"auto"},{id:"15439",url:"15439_f526d889c4bfa24d6f891b6ea6a4daad_google_night_in_teaser_loop",file_type:"audio",load_group:"auto"},{id:"15427",url:"15427_c2b68285b54516eac799112c3edb5800_button_click",file_type:"audio",load_group:"ui"},{id:"15523",url:"15523_2f7d7eb7c6b2484078decd4b4a5f9543_countdown_r1",file_type:"audio",load_group:"ui"},{id:"15462",url:"15462_a8efee8220f686b8a0df980a5e4f1619_google_ni_ui_buttonpopup2",file_type:"audio",load_group:"ui"},{id:"15460",url:"15460_e367db167bed6155de69d142ec7c8bb2_google_ni_ui_transition1",file_type:"audio",load_group:"ui"},{id:"15517",url:"15517_cafc97ab523ab71507f18cd7fbb78fa9_200917_amati_applaunch",file_type:"audio",load_group:"ui"}],audio:{s1PC:{file_id:"15524",editorName:"rollover",retrig:!0,type:"AudioSource",destination_name:"rVwd"},_ncI:{file_id:"15504",editorName:"200917_amati_home",retrig:!0,type:"AudioSource",destination_name:"rVwd"},MkZH:{file_id:"15520",editorName:"200917_amati_uideselect",retrig:!0,type:"AudioSource",destination_name:"rVwd"},bogb:{file_id:"15521",editorName:"200917_amati_uiselect",retrig:!0,type:"AudioSource",destination_name:"rVwd"},pOOP:{file_id:"15516",editorName:"200917_amati_componentfocus",retrig:!0,type:"AudioSource",destination_name:"rVwd"},FOO1:{file_id:"15518",editorName:"200917_amati_transitionbackwardz",retrig:!0,type:"AudioSource",destination_name:"rVwd"},UWWb:{file_id:"15519",editorName:"200917_amati_transitionforwardz",retrig:!0,type:"AudioSource",destination_name:"rVwd"},K2Kh:{file_id:"15440",editorName:"piano_sampler_96",retrig:!0,type:"AudioSource",metaData:{root:96,startRange:95,endRange:127},destination_name:"F5jI"},RSj5:{file_id:"15441",editorName:"piano_sampler_93",retrig:!0,type:"AudioSource",metaData:{root:93,startRange:92,endRange:94},destination_name:"F5jI"},TSaN:{file_id:"15442",editorName:"piano_sampler_90",retrig:!0,type:"AudioSource",metaData:{root:90,startRange:89,endRange:91},destination_name:"F5jI"},bxGJ:{file_id:"15443",editorName:"piano_sampler_87",retrig:!0,type:"AudioSource",metaData:{root:87,startRange:86,endRange:88},destination_name:"F5jI"},gAAJ:{file_id:"15444",editorName:"piano_sampler_84",retrig:!0,type:"AudioSource",metaData:{root:84,startRange:83,endRange:85},destination_name:"F5jI"},yNyT:{file_id:"15458",editorName:"piano_sampler_81",retrig:!0,type:"AudioSource",metaData:{root:81,startRange:80,endRange:82},destination_name:"F5jI"},EWZG:{file_id:"15446",editorName:"piano_sampler_77",retrig:!0,type:"AudioSource",metaData:{root:78,startRange:77,endRange:79},destination_name:"F5jI"},VKfW:{file_id:"15447",editorName:"piano_sampler_74",retrig:!0,type:"AudioSource",metaData:{root:75,startRange:74,endRange:76},destination_name:"F5jI"},utU5:{file_id:"15448",editorName:"piano_sampler_71",retrig:!0,type:"AudioSource",metaData:{root:72,startRange:71,endRange:73},destination_name:"F5jI"},VHiV:{file_id:"15449",editorName:"piano_sampler_69",retrig:!0,type:"AudioSource",metaData:{root:69,startRange:68,endRange:70},destination_name:"F5jI"},gjUI:{file_id:"15450",editorName:"piano_sampler_66",retrig:!0,type:"AudioSource",metaData:{root:66,startRange:65,endRange:67},destination_name:"F5jI"},oNWP:{file_id:"15451",editorName:"piano_sampler_63",retrig:!0,type:"AudioSource",metaData:{root:63,startRange:62,endRange:64},destination_name:"F5jI"},zmkq:{file_id:"15457",editorName:"piano_sampler_60",retrig:!0,type:"AudioSource",metaData:{root:60,startRange:59,endRange:61},destination_name:"F5jI"},CVwK:{file_id:"15453",editorName:"piano_sampler_57",retrig:!0,type:"AudioSource",metaData:{root:57,startRange:56,endRange:58},destination_name:"F5jI"},jZIP:{file_id:"15454",editorName:"piano_sampler_54",retrig:!0,type:"AudioSource",metaData:{root:54,startRange:53,endRange:55},destination_name:"F5jI"},mEeZ:{file_id:"15455",editorName:"piano_sampler_51",retrig:!0,type:"AudioSource",metaData:{root:51,startRange:50,endRange:52},destination_name:"F5jI"},jzJF:{file_id:"15456",editorName:"piano_sampler_48",retrig:!0,type:"AudioSource",metaData:{root:48,startRange:0,endRange:49},destination_name:"F5jI"},c9IS:{name:"piano_sampler",type:"AudioGroup",editorName:"piano_sampler",group_type:2,content:["jzJF","mEeZ","jZIP","CVwK","zmkq","oNWP","gjUI","VHiV","utU5","VKfW","EWZG","yNyT","gAAJ","bxGJ","TSaN","RSj5","K2Kh"]},PgeS:{file_id:"15439",editorName:"google_night_in_teaser_loop",retrig:!1,loop:!0,type:"AudioSource",destination_name:"U8cM"},A4lc:{file_id:"15427",editorName:"button_click",playback_rate:1.13,retrig:!0,type:"AudioSource",destination_name:"fsXq"},AXj4:{file_id:"15523",editorName:"google_ni_ui_count_down",retrig:!0,volume:.79432823472428,type:"AudioSource",destination_name:"fsXq"},Rhsv:{file_id:"15462",editorName:"play_button_animate_in",retrig:!0,volume:.28183829312645,type:"AudioSource",destination_name:"fsXq"},swRd:{file_id:"15460",editorName:"google_ni_ui_transition1",retrig:!0,type:"AudioSource",destination_name:"fsXq"},B1LF:{file_id:"15517",editorName:"200917_amati_applaunch",retrig:!0,type:"AudioSource",destination_name:"rVwd"}},busses:{rVwd:{type:"Bus",destination_name:"$OUT",effects:[]},F5jI:{type:"Bus",output_vol:.50118723362727,destination_name:"rVwd",effects:[]},U8cM:{type:"Bus",output_vol:.50118723362727,destination_name:"rVwd",effects:[]},fsXq:{type:"Bus",output_vol:.3981071705535,destination_name:"rVwd",effects:[]}},masterBus:"rVwd",version:"1.0.1",sequencers:{FTsM:{type:"Sequencer",bpm:120,swing_factor:0}},processes:{uQQE:{vars:["B1LF"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.B1LF.play(0)}},UTLz:{vars:["MkZH"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.MkZH.play(0)}},hWpN:{vars:["pOOP"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.pOOP.play(0)}},ndP5:{vars:["bogb"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.bogb.play(0)}},SjxH:{vars:["UWWb"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.UWWb.play(0)}},dNuv:{vars:["FOO1"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.FOO1.play(0)}},Rc2d:{vars:["A4lc"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.A4lc.play(0)}},RG6G:{vars:["s1PC"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.s1PC.play(0)}},Ubb4:{vars:["PgeS"],type:"SimpleProcess",action:function(t,e,n,r,o,i){if(o[0])try{o[0](r.PgeS.position)}catch(a){}}},adKF:{vars:["F5jI"],type:"SimpleProcess",action:function(t,e,n,r,o,i){n.curveParamLin(r.F5jI.output.gain,o[0],.1,0,0)},at_action:function(t,e,n){Klang.audioTagHandler.fadeBusVolume(e.F5jI,n[0],.1)}},yEbZ:{vars:["c9IS"],type:"SimpleProcess",action:function(t,e,n,r,o,i){var a=o[0]||48,u=r.c9IS.content,s=null;if(i.lastSamples&&i.lastSamples.fadeOutAndStop(.1),s=u.filter((function(t){return a>=t._config.metaData.startRange&&a<=t._config.metaData.endRange}))[0]){var c=a-s._config.metaData.root;s.playbackRate=n.semitonesToPlaybackRate(c),s.play(),i.lastSamples=s}}},Bgm6:{vars:["Rhsv"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.Rhsv.play(0)}},TWtd:{vars:["rVwd"],type:"SimpleProcess",action:function(t,e,n,r,o,i){n.curveParamLin(r.rVwd.output.gain,0,.5,0,1)},at_action:function(t,e,n){Klang.audioTagHandler.fadeBusVolume(e.rVwd,0,.5)}},MABk:{vars:["rVwd"],type:"SimpleProcess",action:function(t,e,n,r,o,i){n.curveParamLin(r.rVwd.output.gain,1,.5,0,0)},at_action:function(t,e,n){Klang.audioTagHandler.fadeBusVolume(e.rVwd,1,.5)}},DxLe:{vars:["PgeS"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.PgeS.play(0)}},zQO8:{vars:["PgeS","c9IS"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.PgeS.fadeOutAndStop(1.7,n.now()),i.lastSamples&&i.lastSamples.fadeOutAndStop(.5)}},Ypgv:{vars:["swRd"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.swRd.play(0)}},FBe1:{vars:["AXj4"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r.AXj4.play(0)}},zGmt:{vars:["_ncI"],type:"SimpleProcess",action:function(t,e,n,r,o,i){r._ncI.play(0)}}},events:{amati_applaunch:"uQQE",amati_deselect:"UTLz",amati_focus:"hWpN",amati_select:"ndP5",amati_transition_in:"SjxH",amati_transition_out:"dNuv",button_click:"Rc2d",button_rollover:"RG6G",get_loop_progress:"Ubb4",keystroke_bus:"adKF",piano:"yEbZ",play_button_animate_in:"Bgm6",sound_off:"TWtd",sound_on:"MABk",teaser_loop_start:"DxLe",teaser_loop_stop:"zQO8",transition_to_tv:"Ypgv",tv_count_down:"FBe1",tv_count_down_complete:"zGmt"},debug:{ignored_events:[],log_ignore:[]},vars:{lastSamples:""},schema:[],exportedSymbols:{google_night_in_teaser_loop:"PgeS"}}}}]);